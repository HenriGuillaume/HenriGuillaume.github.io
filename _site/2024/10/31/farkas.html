<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Farkas’ lemma | Henri Guillaume</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Farkas’ lemma" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Maths" />
<meta property="og:description" content="Maths" />
<link rel="canonical" href="http://localhost:4000/2024/10/31/farkas.html" />
<meta property="og:url" content="http://localhost:4000/2024/10/31/farkas.html" />
<meta property="og:site_name" content="Henri Guillaume" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-10-31T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Farkas’ lemma" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-10-31T00:00:00+00:00","datePublished":"2024-10-31T00:00:00+00:00","description":"Maths","headline":"Farkas’ lemma","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2024/10/31/farkas.html"},"url":"http://localhost:4000/2024/10/31/farkas.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Henri Guillaume" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Henri Guillaume</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Farkas&#39; lemma</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2024-10-31T00:00:00+00:00" itemprop="datePublished">Oct 31, 2024
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <head>
    <!-- Other head elements -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<!-- CSS for the animations and sliders -->
<style>
    /* Make sliders fit the width of their container */
    input[type="range"] {
        width: 100%; /* Full width */
        margin-top: 10px; /* Add some space above */
    }
    #image-container-1, #image-container-2, #image-container-3 {
        width: 100%; /* Make containers full width */
        text-align: center; /* Center the images */
    }
    img {
        max-width: 100%; /* Responsive images */
        height: auto; /* Maintain aspect ratio */
    }
</style>

<!-- CSS for the theorem boxes-->
<style>
    .theorem {
        border: 2px solid #007BFF;
        border-radius: 5px;
        background-color: #f9f9f9;
        padding: 15px;
        margin: 20px 0;
        font-family: Arial, sans-serif;
    }

    .theorem h4 {
        margin: 0;
        font-weight: bold;
    }
</style>

<p>On the surface, this post is a visual explaination of Farkas’ lemma, which mind you, isn’t a difficult lemma to visualise, but still has a great geometrical interpretation. However, my main goal when writing this was to experiment with <a href="https://www.manim.community/">Manim</a> and creating “interactive” animations.</p>

<p>Let’s start by the lemma’s statement:</p>

<div class="theorem">
    <h4>Farkas' lemma</h4>
    For a matrix \(A \in \mathbb{R}^{m \times n}\) and \(b \in \mathbb{R}^{m}\) one and only one of these two things are true:<br />
    - There exists \(x \in \mathbb{R}^{n}\) such that \(Ax = b\) and \(x \geq 0\) <br />
    - There exists \(y \in \mathbb{R}^{m}\) such that \((A^T)y \geq 0\) and \((b^T)y &lt; 0\)
</div>

<p>The part of this theorem that may be unusual is the fact that we put an order on our vector space. Here when we say \(x \leq 0\) we mean that each component of \(x\) is less or equal than zero.</p>

<h2 id="the-first-part-of-the-alternative">The first part of the alternative</h2>

<p>For illustration purposes, we will place ourselves in \(\mathbb{R}^2\) with a matrix 
\(\begin{pmatrix}
1 &amp; 3\\
2 &amp; 1
\end{pmatrix}\)
We will denote \(v_1\) and \(v_2\) the columns of this matrix.</p>

<p>With this order defined, the first statement can be rephrased by saying “\(b\) is the image of a point \(x\) in the first quadrant of the plane”. Let’s have a look at how \(A\) transforms the first quadrant of the plane by applying it to points with positive coordinates.
<br />
Move the slider to operate the transformation, you might need to play with it a little before it becomes smooth enough.
<!-- Animation 1 --></p>
<div id="image-container-1">
    <img id="animation-image-1" src="/assets/farkas/shear_frames/frame0001.jpg" alt="Animation Frame 1" />
</div>
<p><input type="range" id="slider-1" min="1" max="300" value="1" step="1" /></p>

<p>We can see that we obtain a <em>cone</em> that we will call \(S\).</p>

<video id="autoplay-video" width="600" muted="" playsinline="">
    <source src="/assets/farkas/cone.mp4" type="video/mp4" />
    Your browser does not support the video tag.
</video>

<p>That’s all there is to the first statement, our first choice is that \(x\) is in the cone defined by \(A\). So what’s the alternative?</p>

<h2 id="the-second-part-of-the-alternative">The second part of the alternative</h2>

<p>First, we need to have a clear intuition of what a dot product does, that is tell us if two vectors are “pointing in the same direction”. In \(\mathbb{R}^2\) saying that \(u \cdot v = u^T v &lt; 0\) means that if we consider the plane \(P\) orthogonal to \(u\), then \(u\) and \(v\) are on opposite sides of \(P\).<br />
With that being said, let’s look at the conditions in this second part:<br />
\((b^T)y &lt; 0\): this means that \(b\) and \(y\) have an angle between them that is above \(\frac{\pi}{2}\)<br />
\((A^T)y \geq 0\): the product \((A^T)y\) is none other than the vector
\(\begin{pmatrix}
v_{1} \cdot y\\
v_{2} \cdot y
\end{pmatrix}\),
which is positive when \(y\) “faces the same direction” as both \(v_1\) and \(v_2\). 
(Visually, this means that \(y\) is in both of the half planes colored in white in the animation you will find a little further down below.)
<br />
The point of this post is not to go into detail about how one might prove this, see <a href="https://people.orie.cornell.edu/dpw/orie6300/fall2008/Lectures/lec07.pdf">this page</a> for a rigorous proof. However, we’ll outline the main idea: it relies on the <a href="https://en.wikipedia.org/wiki/Hyperplane_separation_theorem">Hyperplane separation theorem</a> in Euclidean space. <br /></p>

<p>The idea is that, no matter how close \(b\) is to our cone \(S\), as long as it is not in it, we can squeeze a hyperplane (in our case, a line) between \(b\) and \(S\). (This relies on the fact that \(S\) is closed and convex and \({b}\) is compact.)
This hyperplane is defined by a vector \(y\) that verifies \(y \cdot s &lt; 0\) for all \(s \in S\)
<!-- Animation 2 --></p>
<div id="image-container-2">
    <img id="animation-image-2" src="/assets/farkas/hp_frames/frame0001.jpg" alt="Animation Frame 2" />
</div>
<p><input type="range" id="slider-2" min="1" max="300" value="1" step="1" /></p>

<p>It comes pretty naturally that picking \(-y\) gives us a natural candidate for our alternative (the \(y\) in our alternative is our \(-y\) here, I did not think this through beforehand).
<!-- Animation 3 --></p>
<div id="image-container-3">
    <img id="animation-image-3" src="/assets/farkas/flippedy_frames/frame0001.jpg" alt="Animation Frame 3" />
</div>
<p><input type="range" id="slider-3" min="1" max="200" value="1" step="1" /></p>

<p>I hope this little post has made this lemma a little clearer for some of you! If you wish to know how the “interactive” animations were created, I’ll explain it here. I mut say that most of the HTML and Javascript was written by ChatGPT, as webdev is something I have no intention of learning anytime soon:</p>

<h2 id="step-one-create-animations-using-manim">Step one: create animations using Manim</h2>

<p>As I said earlier, the animations were made using <a href="https://www.manim.community/">Manim</a>. So go ahead and create your animation, keep in mind that this little “hack” is restricted to animations in “one dimension”, which is why they work with a slider. Export your scenes as short mp4 files with a reasonably high framerate.</p>

<h2 id="step-two-chop-the-images">Step two: chop the images</h2>

<p>Using <a href="https://www.ffmpeg.org/">ffmpeg</a>, save the frames of your video by running <code class="language-plaintext highlighter-rouge">ffmpeg -i your_video.mp4 -vf "fps=30" frames/frame%04d.jpg</code> this will save all of the frames in your video to a dedicated folder.</p>

<h2 id="step-three-embed-the-images-and-add-a-slider">Step three: embed the images and add a slider</h2>

<p>For this step, I’m just gonna give you the code. Just make sure that you replace the parameters in the function call at the end</p>
<h3 id="javascript-code">Javascript code</h3>

<pre><code class="language-javascript">
function initFrameAnimation(framePath, totalFrames, imageElementId, sliderElementId) {
        const animationImage = document.getElementById(imageElementId);
        const slider = document.getElementById(sliderElementId);

        if (!animationImage || !slider) {
            console.error('Invalid element IDs provided.');
            return;
        }

        slider.min = 1;
        slider.max = totalFrames;
        slider.value = 1;
        slider.step = 1;

        function getFrameSrc(frameNumber) {
            const frameString = String(frameNumber).padStart(4, '0');
            return framePath + frameString + '.jpg';
        }

        slider.addEventListener('input', function() {
            const frameNumber = parseInt(slider.value);
            animationImage.src = getFrameSrc(frameNumber);
        });

        function preloadImages(start, end) {
            for (let i = start; i &lt;= end; i++) {
                const img = new Image();
                img.src = getFrameSrc(i);
            }
        }

        preloadImages(1, Math.min(totalFrames, 10));
    }

    // Initialize animations
    initFrameAnimation('/assets/your_video/frame', number_of_frames_in_your_vid, 'animation-image-1', 'slider-1');
</code></pre>

<!-- JavaScript Code for the interactions-->
<script>
    /**
     * Function to initialize the frame-by-frame animation with a slider.
     */
    function initFrameAnimation(framePath, totalFrames, imageElementId, sliderElementId) {
        const animationImage = document.getElementById(imageElementId);
        const slider = document.getElementById(sliderElementId);

        if (!animationImage || !slider) {
            console.error('Invalid element IDs provided.');
            return;
        }

        slider.min = 1;
        slider.max = totalFrames;
        slider.value = 1;
        slider.step = 1;

        function getFrameSrc(frameNumber) {
            const frameString = String(frameNumber).padStart(4, '0');
            return framePath + frameString + '.jpg';
        }

        slider.addEventListener('input', function() {
            const frameNumber = parseInt(slider.value);
            animationImage.src = getFrameSrc(frameNumber);
        });

        function preloadImages(start, end) {
            for (let i = start; i <= end; i++) {
                const img = new Image();
                img.src = getFrameSrc(i);
            }
        }

        preloadImages(1, Math.min(totalFrames, 10));
    }

    // Initialize animations
    initFrameAnimation('/assets/farkas/flippedy_frames/frame', 52, 'animation-image-3', 'slider-3');
    initFrameAnimation('/assets/farkas/hp_frames/frame', 50, 'animation-image-2', 'slider-2');
    initFrameAnimation('/assets/farkas/shear_frames/frame', 95, 'animation-image-1', 'slider-1');
</script>

<!-- JavaScript Code for the videos autoplaying-->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const video = document.getElementById("autoplay-video");

        // Ensure IntersectionObserver is supported
        if ("IntersectionObserver" in window) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        video.play();
                    } else {
                        video.pause();
                    }
                });
            }, { threshold: 0.5 }); // Trigger when 50% of the video is in view

            observer.observe(video);
        } else {
            // Fallback for browsers without IntersectionObserver support
            window.addEventListener("scroll", function() {
                const rect = video.getBoundingClientRect();
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    video.play();
                } else {
                    video.pause();
                }
            });
        }
    });
</script>


  </div><a class="u-url" href="/2024/10/31/farkas.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Henri Guillaume</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Henri Guillaume</li><li><a class="u-email" href="mailto:henri.guillaume@protonmail.com">henri.guillaume@protonmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/HenriGuillaume"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">HenriGuillaume</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Maths</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
